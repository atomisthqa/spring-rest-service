scenario New project should pass smoke test

let project_name = "foo"
let new_package = "com.foo.bar"
let ver = "0.0.1"
let newclass = "MyTest"
let propsFile = "src/main/resources/application.properties"
let grpid = "somegroup"

let pomPath = "pom.xml"
let readmePath = "README.md"

given
  ArchiveRoot

NewSpringBootRestMicroserviceProject
    name = project_name,
    description = "And now for something completely different",
    group_id = grpid,
    version = ver,
    new_class = newclass

then
  fileExists "Dockerfile"
  and fileContains "Dockerfile" { project_name + "-" + ver + ".jar" }
  and fileExists { "src/main/java/com/foo/bar/" + newclass + "Application.java" }
  and fileExists { "src/test/java/com/foo/bar/" + newclass + "ApplicationTests.java" }
  and fileContains pomPath name
  and fileContains pomPath ver
  and fileContains readmePath project_name
  and fileExists propsFile
  and fileContains propsFile "server.port=8080"
  and fileContains propsFile { "info.app.artifact_id=" + project_name }
  and fileContains propsFile { "info.app.group_id=" + grpid }
  and fileContains propsFile { "info.app.version=" + ver }
